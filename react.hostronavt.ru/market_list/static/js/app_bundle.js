!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}window.ee=new EventEmitter;var f=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={filteringFunction:function(e){return!0}},n.SelectChange=n.SelectChange.bind(s(n)),n}return u(t,React.Component),c(t,[{key:"SelectChange",value:function(e){"food"==e.target.value&&(this.state.filteringFunction=function(e,t){return"food"==e.group}),"animal"==e.target.value&&(this.state.filteringFunction=function(e){return"animal"==e.group}),"stuff"==e.target.value&&(this.state.filteringFunction=function(e){return"stuff"==e.group}),"all"==e.target.value&&(this.state.filteringFunction=function(e){return!0}),null==e.target.value&&(this.state.filteringFunction=function(e){return!0}),window.ee.emit("Filtering.on",this.state.filteringFunction)}},{key:"render",value:function(){return React.createElement("div",{className:"market-list__group-filter group-filter"},React.createElement("div",{className:"group-filter__text"},"Группы товаров"),React.createElement("select",{name:"filter2",id:"filter2",className:"group-filter__filter",onChange:this.SelectChange},React.createElement("option",{value:"all"},"все"),React.createElement("option",{value:"animal"},"животные"),React.createElement("option",{value:"stuff"},"предметы"),React.createElement("option",{value:"food"},"еда")))}}]),t}(),_=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={searching_value:""},n.InputChange=n.InputChange.bind(s(n)),n.ButtonPush=n.ButtonPush.bind(s(n)),n}return u(t,React.Component),c(t,[{key:"InputChange",value:function(e){this.setState({searching_value:e.target.value}),e.target.value?document.querySelector(".search__button").innerHTML="Искать":document.querySelector(".search__button").innerHTML="Показать все"}},{key:"ButtonPush",value:function(e){var t=this.state.searching_value;if(t){window.ee.emit("Searching.on",(function(e){return-1!=e.title.indexOf(t)}))}else{window.ee.emit("Searching.on",(function(e){return!0})),document.querySelector(".search__button").innerHTML="Искать"}}},{key:"render",value:function(){return React.createElement("div",{className:"market-list__search search"},React.createElement("input",{type:"text",className:"search__input",onChange:this.InputChange}),React.createElement("button",{className:"search__button",onClick:this.ButtonPush},"Искать"))}}]),t}(),p=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={sortingFunction:function(e,t){return parseInt(t.cost)-parseInt(e.cost)}},n.SelectChange=n.SelectChange.bind(s(n)),n}return u(t,React.Component),c(t,[{key:"SelectChange",value:function(e){"cost_down"==e.target.value&&(this.state.sortingFunction=function(e,t){return parseInt(t.cost)-parseInt(e.cost)}),"cost_up"==e.target.value&&(this.state.sortingFunction=function(e,t){return parseInt(e.cost)-parseInt(t.cost)}),"alphabetAZ"==e.target.value&&(this.state.sortingFunction=function(e,t){return e.title>t.title?1:e.title<t.title?-1:1}),"alphabetZA"==e.target.value&&(this.state.sortingFunction=function(e,t){return e.title>t.title?-1:(e.title,t.title,1)}),null==e.target.value&&(this.state.sortingFunction=0),window.ee.emit("Sorting.on",this.state.sortingFunction)}},{key:"render",value:function(){return React.createElement("div",{className:"market-list__sorting sorting"},React.createElement("div",{className:"sorting__text"},"Упорядочить:"),React.createElement("select",{name:"filter1",id:"filter1",className:"sorting__filter",onChange:this.SelectChange},React.createElement("option",{value:"cost_up"},"по возрастанию цены"),React.createElement("option",{value:"cost_down"},"по убыванию цены"),React.createElement("option",{value:"alphabetAZ"},"по алфавиту a - z"),React.createElement("option",{value:"alphabetZA"},"по алфавиту z - a")))}}]),t}(),h=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={},n.ButtonPush=n.ButtonPush.bind(s(n)),n}return u(t,React.Component),c(t,[{key:"ButtonPush",value:function(e){var t=this.props.data;window.ee.emit("Item.push",t)}},{key:"render",value:function(){return React.createElement("button",{className:"market-list__item__button",onClick:this.ButtonPush},"в корзину")}}]),t}(),d=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={},n}return u(t,React.Component),c(t,[{key:"render",value:function(){var e,t=this.props.data;return e=t.length>0?t.map((function(e,t){return React.createElement("div",{className:"market-list__item",key:t},React.createElement("input",{type:"checkbox",name:"",id:"",className:"market-list__item__checkbox v-none"}),React.createElement("div",{className:"market-list__item__title"},e.title),React.createElement("small",{className:"market-list__item__group"},e.group),React.createElement("img",{className:"market-list__item__img",src:e.imgURL,alt:e.title}),React.createElement("div",{className:"market-list__item__number-input  number-input"},React.createElement("input",{className:"number-input__input",type:"text"}),React.createElement("span",{className:"number-input__plus"},"+"),React.createElement("span",{className:"number-input__minus"},"-")),React.createElement("div",{className:"market-list__item__cost"},"$",e.cost),React.createElement(h,{data:e}))})):React.createElement("p",null,"К сожалению, товаров нет"),React.createElement("div",{className:"market-list__items"},e)}}]),t}(),g=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={goods:n.props.data,sorting_function:function(e,t){return e.title>t.title?1:e.title<t.title?-1:0},filtering_function:function(e){return!0},searching_function:function(e){return!0}},n}return u(t,React.Component),c(t,[{key:"componentDidMount",value:function(){var e=this;window.ee.addListener("Sorting.on",(function(t){e.setState({sorting_function:t})})),window.ee.addListener("Filtering.on",(function(t){e.setState({filtering_function:t})})),window.ee.addListener("Searching.on",(function(t){e.setState({searching_function:t})}))}},{key:"componentWillUnmount",value:function(){window.ee.removeListener("Sorting.on"),window.ee.removeListener("Filtering.on"),window.ee.removeListener("Searching.on")}},{key:"render",value:function(){var e=this.state.goods.sort(this.state.sorting_function).filter(this.state.filtering_function).filter(this.state.searching_function);return React.createElement("main",{id:"market-list"},React.createElement("article",{className:"market-list"},React.createElement("div",{className:"market-list__title"},"Магазин 1000 мелочей"),React.createElement(_,null),React.createElement(p,null),React.createElement(f,null),React.createElement(d,{data:e})),React.createElement(v,null))}}]),t}(),v=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={choosen_goods:[]},n}return u(t,React.Component),c(t,[{key:"componentDidMount",value:function(){var e=this;window.ee.addListener("Item.push",(function(t){var r=e.state.choosen_goods,a=t.title;if(0==r.length){var o=r.concat(t);e.setState(n({choosen_goods:o},a,1))}else if(e.state[a])e.setState((function(e){return n({},a,e[a]+1)}));else{o=r.concat(t);e.setState(n({choosen_goods:o},a,1))}})),window.ee.addListener("Delete.row",(function(t){var r=e.state.choosen_goods.filter((function(e){return e.title!=t.title}));e.setState((function(e){return n({choosen_goods:r},t.title,0)}))}))}},{key:"componentWillUnmount",value:function(){window.ee.removeListener("Item.push"),window.ee.removeListener("Delete.row")}},{key:"render",value:function(){return React.createElement("aside",{className:this.state.choosen_goods.length>0?"cart":"d-none"},React.createElement(R,{super_state:this.state,data:this.state.choosen_goods}),React.createElement("div",{className:"cart__statistics"}))}}]),t}(),R=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={},n}return u(t,React.Component),c(t,[{key:"render",value:function(){var e,t=this.props.data;self=this,e=t.length>0?t.map((function(e,t){return React.createElement("div",{className:"cart__main__row cart-row",key:t},React.createElement("div",{className:"cart-row__title"},e.title),React.createElement("div",{className:"cart-row__group"},e.group),React.createElement("div",{className:"cart-row__cost"},e.cost),React.createElement("div",{className:"cart-row__number"},self.props.super_state[e.title]),React.createElement("div",{className:"cart-row__cost"},self.props.super_state[e.title]*e.cost),React.createElement(E,{item:e}))})):React.createElement("p",null,"К сожалению, товаров нет");var n=t.reduce((function(e,t){return self.props.super_state[t.title]*t.cost+e}),0),r=t.filter((function(e){return"food"==e.group})).reduce((function(e,t){return self.props.super_state[t.title]*t.cost+e}),0),a=t.filter((function(e){return"stuff"==e.group})).reduce((function(e,t){return self.props.super_state[t.title]*t.cost+e}),0),o=t.filter((function(e){return"animal"==e.group})).reduce((function(e,t){return self.props.super_state[t.title]*t.cost+e}),0),c=Math.floor(100*o/n),i=Math.floor(100*a/n),l=Math.floor(100*r/n);return React.createElement("div",{className:"cart__main"},React.createElement("div",{className:"cart__main__title"},"Список покупок"),React.createElement("p",{className:"cart__text"},"Стоимость всех покупок: $ ",n),React.createElement("p",{className:"cart__text"},"Еда:  ",l," %"),React.createElement("p",{className:"cart__text"},"Животные:  ",c," %"),React.createElement("p",{className:"cart__text"},"Предметы:  ",i," %"),React.createElement("div",{className:"cart__main__row cart-row"},React.createElement("strong",{className:"cart-row__title"},React.createElement("small",null,"Товар")),React.createElement("strong",{className:"cart-row__group"},React.createElement("small",null,"группа")),React.createElement("strong",{className:"cart-row__cost"},React.createElement("small",null,"цена")),React.createElement("strong",{className:"cart-row__number"},React.createElement("small",null,"количество")),React.createElement("strong",{className:"cart-row__cost"},React.createElement("small",null,"общая стоимость"))),e)}}]),t}(),E=function(e){function t(e){var n;return a(this,t),(n=i(this,l(t).call(this,e))).state={},n.ButtonPush=n.ButtonPush.bind(s(n)),n}return u(t,React.Component),c(t,[{key:"ButtonPush",value:function(e){var t=this.props.item;window.ee.emit("Delete.row",t)}},{key:"render",value:function(){return React.createElement("button",{className:"cart-row__button",onClick:this.ButtonPush},"x")}}]),t}();fetch("static/js/market_list.json").then((function(e){e.ok?e.json().then((function(e){ReactDOM.render(React.createElement(g,{data:e}),document.getElementById("market-list-root"))})):ReactDOM.render(React.createElement("h1",null,"Файла с данными о товарах  не существует."),document.getElementById("market-list-root"))}))}]);